# Sunhan 사내 웹 메신저 Backend

##  Sunhan 사내 웹 메신저

### 프로젝트 개요
`sunhan_websocket_backend` 프로젝트는 실시간 채팅 및 내부 사용자(직원) 관리를 위한 백엔드 애플리케이션입니다. 이 시스템은 웹소켓을 활용한 채팅 기능, 직원 정보 관리, 인증, 네이버 및 카카오 같은 외부 서비스 연동 기능을 제공합니다.

---

### 주요 기능

* **실시간 채팅 기능**:
    * 웹소켓을 이용한 실시간 채팅 메시지 송수신 기능을 지원합니다.
    * 채팅방 생성, 메시지 전송, 파일 업로드, 메시지 읽음 처리 등을 관리합니다.
* **사용자 및 직원 관리**:
    * 직원 등록 및 프로필 관리 기능을 제공합니다.
    * 사용자 정보(아이디, 이름, 부서, 직책 등) 및 역할을 조회합니다.
* **인증 및 보안**:
    * ID 중복 확인, 이메일 인증, 로그인, 토큰 유효성 검사 및 토큰 갱신 기능을 담당합니다.
    * JWT(JSON Web Token)를 사용하여 사용자 인증 및 권한을 관리합니다.
* **외부 서비스 연동**:
    * 네이버 로그인 연동을 통해 사용자 정보를 가져옵니다.
    * (주석 처리된 코드 기반) 카카오 메시지 전송 기능이 구현되어 있습니다.
* **부서 및 구역 관리**:
    * 부서의 상세 정보와 섹션(구역)을 조회, 추가, 삭제, 수정할 수 있습니다.
    * 섹션 사용 여부를 설정하고, 전체 섹션의 가시성을 토글할 수 있습니다.

---

### 기술 스택

* **백엔드**: Java, Spring Boot, Spring Security
* **통신**: WebSocket (STOMP), RESTful API
* **보안**: JWT (JSON Web Token)

---

### API 명세서

#### 1. 인증 (`/api/v1/auth`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `POST` | `/id-check` | 아이디 중복을 확인합니다. |
| `POST` | `/email-certification` | 이메일 인증을 요청합니다. |
| `POST` | `/sign-up` | 사용자 회원가입을 처리합니다. |
| `POST` | `/login` | 사용자가 로그인합니다. |
| `POST` | `/token/refresh` | 리프레시 토큰을 이용해 액세스 토큰을 갱신합니다. |
| `GET` | `/verify-token` | 액세스 토큰의 유효성을 검사합니다. |
| `GET` | `/logout` | 사용자를 로그아웃 처리합니다. |

---

#### 2. 직원 관리 (`/api/v1/detail/employment`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `POST` | `/sign-up` | 직원을 등록합니다. |
| `PUT` | `/profile` | 직원의 프로필 정보를 수정합니다. |
| `POST` | `/profile/image` | 직원의 프로필 이미지를 업로드합니다. |
| `GET` | `/profile/me` | 현재 로그인한 직원의 프로필 정보를 조회합니다. |

---

#### 3. 사용자 프로필 이미지 (`/api/v1/employees`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `GET` | `/{employeeId}/profile-image` | 특정 직원의 프로필 이미지를 조회합니다. |

---

#### 4. 채팅 (`/api/v1/chat`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `POST` | `/rooms` | 새로운 채팅방을 생성합니다. |
| `GET` | `/rooms` | 채팅방 목록을 조회합니다. |
| `GET` | `/rooms/{roomId}/messages` | 특정 채팅방의 메시지 내역을 페이지별로 조회합니다. |
| `POST` | `/messages/bulk` | 여러 사용자에게 메시지를 대량으로 전송합니다. |
| `POST` | `/rooms/{roomId}/read` | 특정 채팅방의 모든 메시지를 읽음 처리합니다. |
| `GET` | `/users` | 채팅이 가능한 사용자 목록을 조회합니다. |
| `POST` | `/rooms/{roomId}/files/upload` | 채팅방에 파일을 업로드합니다. |

---

#### 5. 부서 및 구역 관리 (`/api/v1/detail/department`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `GET` | `/departments` | 부서 목록을 조회합니다. |
| `POST` | `/add` | 새로운 부서를 추가합니다. |
| `PUT` | `/{departmentId}/update` | 특정 부서 정보를 수정합니다. |
| `PUT` | `/{departmentId}/delete` | 특정 부서를 삭제(논리적)합니다. |
| `GET` | `/{departmentId}` | 특정 부서의 상세 정보를 조회합니다. |
| `POST` | `/{departmentId}/sections/add` | 특정 부서에 구역을 추가합니다. |
| `PUT` | `/{departmentId}/sections/update` | 특정 부서의 구역을 수정합니다. |
| `PUT` | `/sections/toggleVisibility` | 모든 부서의 구역 가시성을 토글합니다. |

---

#### 6. 구역 설정 (`/api/v1/detail/department/settings`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `GET` | `/sections` | 구역 사용 여부 설정을 조회합니다. |
| `PUT` | `/sections` | 구역 사용 여부 설정을 변경합니다. |

---

#### 7. 네이버 연동 (`/api/v1/naver`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `GET` | `/userinfo` | 네이버 로그인 사용자 정보를 조회합니다. |

---

#### 8. 사용자 정보 (`/api/v1/user`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `GET` | `/me` | 현재 로그인한 사용자의 정보를 조회합니다. |
| `GET` | `/role/{userId}` | 특정 사용자의 역할을 조회합니다. |

---

#### 9. 관리자 (`/api/v1/admin`)

| HTTP 메소드 | 엔드포인트 | 설명 |
| :--- | :--- | :--- |
| `GET` | `/users` | 모든 사용자의 목록을 조회합니다 (ADMIN 권한 필요). |
